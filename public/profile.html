<!DOCTYPE html> <!-- Dichiarazione del tipo di documento, indica che si tratta di un documento HTML5 -->
<html lang="en"> <!-- Inizio del documento HTML, specificando che la lingua è inglese -->
<head>
  <meta charset="UTF-8"> <!-- Imposta la codifica dei caratteri su UTF-8, supporta la maggior parte dei caratteri internazionali -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Imposta il viewport per il responsive design, utile per dispositivi mobili -->
  <title>TriviX - My profile</title> <!-- Titolo della pagina che appare nella scheda del browser -->
  
  <!-- Bootstrap CSS per stili predefiniti e componenti reattivi -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Google Fonts per utilizzare il font Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Font Awesome per le icone utilizzate nel sito -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- CSS personalizzato per stili specifici del progetto -->
  <link rel="stylesheet" href="css/style.css">
  
  <!-- CSS per la modalità scura -->
  <link rel="stylesheet" href="css/dark-mode.css">
  
  <!-- CSS per l'interfaccia moderna -->
  <link rel="stylesheet" href="css/modern-ui.css">
  
  <!-- Favicon per il sito, l'icona che appare nella scheda del browser -->
  <link rel="icon" type="image/x-icon" href="/img/favicon/favicon.ico">
  
  <style>
    /* Stili per le opzioni degli avatar */
    .avatar-option {
      cursor: pointer; /* Cambia il cursore quando si passa sopra l'elemento */
      transition: transform 0.2s, box-shadow 0.2s; /* Aggiunge una transizione per l'animazione */
      border: 2px solid transparent; /* Bordo trasparente inizialmente */
    }
    .avatar-option:hover {
      transform: scale(1.05); /* Ingrandisce l'avatar al passaggio del mouse */
      box-shadow: 0 0 10px rgba(0, 123, 255, 0.5); /* Aggiunge un'ombra al passaggio del mouse */
      border-color: #0d6efd; /* Cambia il colore del bordo al passaggio del mouse */
    }
    .avatar-item {
      cursor: pointer; /* Cambia il cursore quando si passa sopra l'elemento */
    }
  </style>
</head>
<body>
  <!-- Barra di navigazione principale -->
  <nav class="navbar navbar-dark"> <!-- Navbar scura -->
      <div class="container"> <!-- Contenitore per la navbar -->
          <a class="navbar-brand" href="index.html"> <!-- Logo e nome del sito -->
              <img src="img/logo.png" alt="TriviX Logo" height="40"> <!-- Logo del sito -->
              TriviX
          </a>
          <ul class="navbar-nav flex-row gap-3 d-none d-sm-flex"> <!-- Lista di navigazione -->
              <li class="nav-item">
                  <a class="nav-link" href="index.html">Home</a> <!-- Link alla home -->
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="matches.html">Stats</a> <!-- Link alle statistiche -->
              </li>
              <li class="nav-item d-none" id="loginNavItem">
                  <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Login</a> <!-- Link per aprire il modale di login -->
              </li>
              <li class="nav-item d-none" id="registerNavItem">
                  <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#registerModal">Register</a> <!-- Link per aprire il modale di registrazione -->
              </li>
              <li class="nav-item" id="profileNavItem">
                  <a class="nav-link active" href="profile.html">Profile</a> <!-- Link al profilo utente, evidenziato come attivo -->
              </li>
              <li class="nav-item" id="logoutNavItem">
                  <a class="nav-link" href="#" id="logoutBtn">Logout</a> <!-- Link per il logout -->
              </li>
          </ul>
      </div>
  </nav>

  <!-- Contenuto principale -->
  <div class="container main-container"> <!-- Contenitore principale per il contenuto -->
      <div class="row justify-content-center"> <!-- Righe centrata -->
          <div class="col-12 col-md-11 col-lg-8"> <!-- Colonna centrale -->
              <div class="card profile-card"> <!-- Scheda per il profilo -->
                  <div class="card-body"> <!-- Corpo della scheda -->
                      <div class="text-center mb-4"> <!-- Sezione centrale per l'avatar e il nome -->
                          <img src="img/default-avatar.png" alt="Profile Avatar" class="profile-avatar" id="profileAvatar"> <!-- Avatar del profilo -->
                          <h2 class="mt-3" id="profileUsername">Username</h2> <!-- Nome utente -->
                          <p class="text-muted" id="profileEmail">email@example.com</p> <!-- Email dell'utente -->
                      </div>
                      
                      <div class="stats-container"> <!-- Contenitore per le statistiche -->
                          <div class="row text-center g-3"> <!-- Righe per le statistiche -->
                              <div class="col-6 col-md-3"> <!-- Colonna per il numero di partite giocate -->
                                  <div class="stat-item">
                                      <h3 id="gamesPlayed">42</h3> <!-- Numero di partite giocate -->
                                      <p>Games</p> <!-- Etichetta per il numero di partite -->
                                  </div>
                              </div>
                              <div class="col-6 col-md-3"> <!-- Colonna per il numero di partite vinte -->
                                  <div class="stat-item">
                                      <h3 id="gamesWon">18</h3> <!-- Numero di partite vinte -->
                                      <p>Wins</p> <!-- Etichetta per il numero di vittorie -->
                                  </div>
                              </div>
                              <div class="col-6 col-md-3"> <!-- Colonna per il numero di risposte corrette -->
                                  <div class="stat-item">
                                      <h3 id="correctAnswers">90</h3> <!-- Numero di risposte corrette -->
                                      <p>Answers</p> <!-- Etichetta per il numero di risposte -->
                                  </div>
                              </div>
                              <div class="col-6 col-md-3"> <!-- Colonna per i punti totali -->
                                  <div class="stat-item" style="border: 2px solid #2563eb; box-shadow: 0 0 15px rgba(37, 99, 235, 0.2);"> <!-- Stile personalizzato per evidenziare i punti -->
                                      <h3 id="points" class="fw-bold" style="color: #2563eb;">210</h3> <!-- Numero di punti -->
                                      <p><i class="fas fa-trophy me-1" style="color: #f59e0b;"></i>Points</p> <!-- Etichetta per i punti con icona -->
                                  </div>
                              </div>
                          </div>
                      </div>
                      
                      <hr> <!-- Linea orizzontale per separare le sezioni -->
                      
                      <h4 class="mb-3">Category Performance</h4> <!-- Titolo per le prestazioni nelle categorie -->
                      <div class="category-stats" id="categoryStats"> <!-- Contenitore per le statistiche delle categorie -->
                          <!-- Le statistiche delle categorie verranno caricate qui dinamicamente -->
                      </div>
                      
                      <div class="text-center mt-4"> <!-- Sezione per il pulsante di modifica del profilo -->
                          <button class="btn btn-primary" id="editProfileBtn">Edit Profile</button> <!-- Pulsante per modificare il profilo -->
                      </div>
                      <!-- Pulsante Logout Mobile spostato sotto Edit Profile -->
                      <div class="d-block d-sm-none text-center mt-3"> <!-- Pulsante di logout visibile solo su dispositivi mobili -->
                            <button id="mobileLogoutBtn" class="btn btn-danger w-75" style="max-width:320px;">Logout</button> <!-- Pulsante per il logout -->
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>

  <!-- Modale per modificare il profilo -->
  <div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true"> <!-- Modale per la modifica del profilo -->
    <div class="modal-dialog"> <!-- Dialogo del modale -->
      <div class="modal-content"> <!-- Contenuto del modale -->
        <div class="modal-header"> <!-- Intestazione del modale -->
          <h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5> <!-- Titolo della finestra di modifica del profilo -->
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> <!-- Pulsante per chiudere il modale -->
        </div>
        <div class="modal-body"> <!-- Corpo del modale -->
          <form id="editProfileForm"> <!-- Form per la modifica del profilo -->
            <div class="text-center mb-4"> <!-- Sezione centrale per l'avatar e il pulsante di selezione -->
              <img src="img/default-avatar.png" alt="Profile Avatar" class="profile-avatar" id="editProfileAvatar"> <!-- Avatar del profilo -->
              <div class="mt-2 d-flex justify-content-center gap-2"> <!-- Contenitore per i pulsanti di selezione avatar -->
                <button type="button" id="selectAvatarBtn" class="btn btn-sm btn-outline-primary"> <!-- Pulsante per scegliere un avatar -->
                  <i class="fas fa-images me-1"></i> Choose avatar
                </button>
                <label for="avatarUpload" class="btn btn-sm btn-outline-primary"> <!-- Pulsante per caricare un'immagine -->
                  <i class="fas fa-upload me-1"></i> Upload image</label>
                <input type="file" id="avatarUpload" class="d-none" accept="image/*"> <!-- Campo per caricare un'immagine, nascosto -->
              </div>
            </div>
            <div class="mb-3"> <!-- Margine inferiore per il campo -->
              <label for="editUsername" class="form-label">Username</label> <!-- Etichetta per il campo username -->
              <input type="text" class="form-control" id="editUsername" required> <!-- Campo per inserire lo username -->
            </div>
            <div class="mb-3"> <!-- Margine inferiore per il campo -->
              <label for="editEmail" class="form-label">Email</label> <!-- Etichetta per il campo email -->
              <input type="email" class="form-control" id="editEmail" required> <!-- Campo per inserire l'email -->
            </div>
            <div class="mb-3"> <!-- Margine inferiore per il campo -->
              <label for="editPassword" class="form-label">New password (leave empty to keep current one)</label> <!-- Etichetta per il campo password -->
              <input type="password" class="form-control" id="editPassword"> <!-- Campo per inserire la nuova password -->
            </div>
            <div class="alert alert-danger d-none" id="editProfileError"></div> <!-- Messaggio di errore in caso di problemi con la modifica del profilo -->
            <div class="d-grid"> <!-- Contenitore per il pulsante di salvataggio -->
              <button type="submit" class="btn btn-primary">Save changes</button> <!-- Pulsante per salvare le modifiche -->
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modale per la selezione dell'avatar -->
  <div class="modal fade" id="avatarSelectionModal" tabindex="-1" aria-labelledby="avatarSelectionModalLabel" aria-hidden="true"> <!-- Modale per la selezione dell'avatar -->
    <div class="modal-dialog modal-dialog-centered"> <!-- Dialogo del modale centrato -->
      <div class="modal-content"> <!-- Contenuto del modale -->
        <div class="modal-header"> <!-- Intestazione del modale -->
          <h5 class="modal-title" id="avatarSelectionModalLabel">Scegli un avatar</h5> <!-- Titolo della finestra per la selezione dell'avatar -->
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> <!-- Pulsante per chiudere il modale -->
        </div>
        <div class="modal-body"> <!-- Corpo del modale -->
          <div class="row" id="avatarGrid"> <!-- Griglia per le opzioni degli avatar -->
            <!-- Le opzioni degli avatar verranno caricate qui dinamicamente -->
          </div>
        </div>
        <div class="modal-footer"> <!-- Parte inferiore del modale -->
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annulla</button> <!-- Pulsante per annullare -->
        </div>
      </div>
    </div>
  </div>

  <!-- Barra di navigazione mobile in basso -->
  <div class="mobile-nav"> <!-- Contenitore per la navigazione mobile -->
    <a href="index.html"> <!-- Link alla home -->
      <i class="fas fa-home"></i> <!-- Icona per la home -->
      <span>Home</span> <!-- Testo per la home -->
    </a>
    <a href="matches.html"> <!-- Link alle statistiche -->
      <i class="fas fa-chart-bar"></i> <!-- Icona per le statistiche -->
      <span>Stats</span> <!-- Testo per le statistiche -->
    </a>
    <a href="profile.html" class="active"> <!-- Link al profilo utente, evidenziato come attivo -->
      <i class="fas fa-user"></i> <!-- Icona per il profilo -->
      <span>Profile</span> <!-- Testo per il profilo -->
    </a>
  </div>

  <!-- Footer -->
  <footer class="footer mt-auto py-3"> <!-- Contenitore per il footer -->
      <div class="container text-center"> <!-- Contenitore centrale per il testo -->
          <span>© 2025 TriviX Clone | Created by Leonardo Galgano & Daniele D'Alonzo</span> <!-- Informazioni su chi ha creato il progetto -->
          <br>
          <button id="darkModeToggle" class="btn btn-sm mt-2"> <!-- Pulsante per attivare/disattivare la modalità scura -->
            <i class="fas fa-moon"></i> Dark Mode
          </button>
      </div>
  </footer>

  <!-- Bootstrap JS Bundle con Popper per le funzionalità dinamiche di Bootstrap (come modali, dropdown, ecc.) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Script con funzioni di supporto per alcune operazioni legate a Bootstrap -->
  <script src="js/bootstrap-util.js"></script>
  <!-- Script che gestisce tutte le chiamate API verso il backend; deve essere caricato prima di auth.js per permettere l'autenticazione -->
  <script src="js/api-client.js"></script>
  <!-- Script che gestisce login, logout, registrazione e la logica di autenticazione utente -->
  <script src="js/auth.js"></script>
  <!-- Script principale per la pagina del profilo, gestisce le interazioni e il caricamento dei dati -->
  <script src="js/profile.js"></script>
  <!-- Script che permette di attivare/disattivare la modalità scura -->
  <script src="js/dark-mode.js"></script>
  <!-- Script che gestisce la navigazione mobile, rendendo la barra in basso interattiva e reattiva -->
  <script src="js/mobile-nav.js"></script>
</body>
</html>